<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 01 Footstep Events</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Docs</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/help.png" height="20" style="position:relative; left:-4px; top:-1px;"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v4.0</a></li>
        <li><a href="/animancer/lite"><img src="/animancer/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Try</a></li>
        <li><a href="/animancer/pro"><img src="/animancer/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Buy</a></li>
        <li><a href="https://kybernetik.com.au/kailas-dierk/unity-assets"><img src="/animancer/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#fields">Fields</a></p>
<p><a href="#logic">Logic</a></p>
<p><a href="#animancer-events">Animancer Events</a></p>
<p><a href="#animation-events">Animation Events</a></p>
<p><a href="#conclusion">Conclusion</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/help">Help and FAQ</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/cs">C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/cs/overview">Scripting Overview</a></li>
                <li><a href="/animancer/docs/introduction/cs/organisation">Organisation</a></li>
                <li><a href="/animancer/docs/introduction/cs/variables">Variables</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods">Methods</a></li>
                <li><a href="/animancer/docs/introduction/cs/inheritance">Inheritance</a></li>
                <li><a href="/animancer/docs/introduction/cs/vectors">Vectors</a></li>
                <li><a href="/animancer/docs/introduction/cs/other">Other Topics</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li><a href="/animancer/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/docs/examples/basics/named-animations">04 Named Animations</a></li>
                <li><a href="/animancer/docs/examples/basics/hybrid">05 Hybrid Basics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="selected"><a href="/animancer/docs/examples/events/footsteps">01 Footstep Events</a></li>
                <li><a href="/animancer/docs/examples/events/golf">02 Golf Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fsm/creatures">01 Creatures</a></li>
                <li><a href="/animancer/docs/examples/fsm/interrupts">02 Interrupt Management</a></li>
                <li><a href="/animancer/docs/examples/fsm/brains">03 Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/more-brains">04 More Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/weapons">05 Weapons</a></li>
                <li><a href="/animancer/docs/examples/fsm/platformer">06 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/ik/puppet">01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/ik/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/hybrid">01 Hybrid Mini Game</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/docs/manual/events/animancer">Animancer Events</a></li>
                <li><a href="/animancer/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/fsm">Finite State Machines</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/inconsistent-timing">Inconsistent Timing</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/resetting-animated-values">Resetting Animated Values</a></li>
                <li><a href="/animancer/docs/bugs/unused-graph-destroy-warning">Unused Graph Destroy Warning</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>01 Footstep Events</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><strong>Difficulty</strong>: <a href="../../../introduction/glossary#example-difficulty">Beginner</a></p>
<p><strong>Location</strong>: <em>Assets/Plugins/Animancer/Examples/05 Events/01 Footstep Events</em></p>
<p><strong>Namespace</strong>: <a href="../../../../api/Animancer.Examples.Events"><code>Animancer.Examples.Events</code></a></p>
</blockquote>
<p><img src="footstep-events.gif" class="img-responsive img-right"> This example demonstrates how you can use <a href="../../../manual/events/animancer">Animancer Events</a> and <a href="../../../manual/events/animation">Animation Events</a> to play a randomly chosen footstep sound whenever the character's foot touches the ground during a walk cycle. The <a href="../../../manual/events">Events</a> page summarises the differences between the two systems which are further demonstrated by the <a href="../golf">Golf Events</a> example.</p>
<p>The actual example scene demonstrates both systems with one character each, playing a sound every time one of their feet touches the ground. But since the video does not have sound, it instead shows a sphere around the foot in question for a short time after each event occurs.</p>
<p>The <a href="../../animator-controllers-3d-game-kit">3D Game Kit</a> example uses a similar system which also has different footstep sounds depending on the surface being stepped on. An even more complex system might not even use <a href="../../../manual/events">Events</a> at all, but could instead use <a href="../../../introduction/cs/vectors#raycasting">Raycasts</a> to determine when a character's feet touch down so it would work for all animations without manually adding events to them all and could even calculate the desired volume based on the velocity of the foot while properly accounting for any blending.</p>
<p></p><details><summary>The base <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script is used to demonstrate <a href="../../../manual/events/animancer">Animancer Events</a> and looks like this (with the comments removed since we are about to explain how it works):</summary><p>
</p><pre><code class="language-cs">using Animancer;
using UnityEngine;

public class <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a> : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private <a href="/animancer/api/Animancer/Transition">ClipState.Transition</a> _Walk;
    [SerializeField] private AudioClip[] _Sounds;

    protected void OnEnable()
    {
        _Animancer.Play(_Walk);
    }

    public void PlaySound(AudioSource source)
    {
        source.clip = _Sounds[Random.Range(0, _Sounds.Length)];
        source.Play();
    }
}
</code></pre>
<p></p></details><p></p>
<p></p><details><summary>The <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a></code> script inherits from <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> to demonstrate <a href="../../../manual/events/animation">Animation Events</a> instead and looks like this (with the comments removed since we are about to explain how it works):</summary><p>
</p><pre><code class="language-cs">using Animancer;
using UnityEngine;

public sealed class <a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a> : <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a>
{
    [SerializeField] private AudioSource[] _FootSources;

    private void Footstep(int foot)
    {
        PlaySound(_FootSources[foot]);
    }
}
</code></pre>
<p></p></details><p></p>
<h1 id="fields">Fields</h1>
<table class="table">
  <thead>
    <tr><th style="width:50%">Code</th>
    <th style="width:50%">Inspector</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>
<pre><code class="language-cs">[SerializeField]
private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;

[SerializeField]
private <a href="/animancer/api/Animancer/Transition">ClipState.Transition</a> _Walk;

[SerializeField]
private AudioClip[] _Sounds;
</code></pre>
<p>The <code>_Sounds</code> array is filled with all the sounds in the <em>Footsteps On Concrete</em> folder.</p>
</td>
      <td><img src="animancer-inspector.png" class="img-responsive"></td>
    </tr>
  </tbody>
</table>
<h1 id="logic">Logic</h1>
<p>On startup, we simply play the assigned animation:</p>
<pre><code class="language-cs">protected void OnEnable()
{
    _Animancer.Play(_Walk);
}
</code></pre>
<p>And then a <code>PlaySound</code> method which we will be calling using <a href="#animancer-events">Animancer Events</a>:</p>
<pre><code class="language-cs">public void PlaySound(AudioSource source)
{
    source.clip = _Sounds[Random.Range(0, _Sounds.Length)];
    source.Play();
}
</code></pre>
<ul>
<li>It takes an <code>AudioSource</code> as a parameter so that each foot can play its sound from a different location.</li>
<li>Using only a single footstep sound every time feels repetitive for players, so instead we have a bunch of similar ones and pick a random one each time.</li>
<li>Note that the minimum value in <code>Random.Range</code> is <em>inclusive</em> (so it can pick 0) while the maximum value is <em>exclusive</em> (so it can not pick <code>_Sounds.Length</code>), which is perfect for picking a random element from an array.</li>
</ul>
<h1 id="animancer-events">Animancer Events</h1>
<p>Using a <a href="../../../manual/transitions">Transition</a> field gives us various additional controls in the Inspector which we would not have if we used a simple <code>AnimationClip</code> reference. In this case, we are interested in the preview button on the right so that we can see what the character will look like throughout the animation while we set up the <a href="../../../manual/events/animancer">Animancer Events</a>:</p>
<ol>
<li>Click the "Preview" button to open the <a href="../../../manual/transitions#previews">Preview Window</a>.</li>
<li>Click the "Add Event" button and adjust the time of the event. The <em>Humanoid-Walk</em> animation touches down at about 0.04x (normalized time).</li>
<li>Add a function to the callback.</li>
<li>Assign the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script as the target object.</li>
<li>Select its <code>PlaySound</code> method.</li>
<li>Since this is the event for the left foot, find the character's <em>Foot.L</em> object in the Hierarchy.</li>
<li>Add an <code>AudioSource</code> component to the <em>Foot.L</em>.</li>
<li>Drag that <code>AudioSource</code> into the parameter field for the <code>PlaySound</code> method.</li>
<li>Repeat steps 2-8 for the right foot which touches down at about 0.54x.</li>
</ol>
<p><img src="animancer-events.gif" class="img-responsive"></p>
<p>If we wanted to share these events in multiple places throughout the project, we could use a <a href="../../../manual/transitions/types#transition-assets">Transition Asset</a> instead of a regular <a href="../../../manual/transitions">Transition</a>.</p>
<h1 id="animation-events">Animation Events</h1>
<p>Unity's <a href="../../../manual/events/animation">Animation Events</a> are built into <code>AnimationClip</code> assets rather than being added to a scene object in the Inspector. This affects several parts of the setup process which will be explained as we get to them.</p>
<p>Note that this setup process is exactly the same as it would be without Animancer.</p>
<h2 id="duplicate-animation">Duplicate Animation</h2>
<p>The first difference is the fact that we need to make a copy of the original <em>Humanoid-Walk</em> animation to add the events since we do not want them in any of the other examples which use that animation. This may not be a real problem in a proper project since you will likely use each animation for only one general purpose.</p>
<p></p><details><summary>If your animation is imported as part of a model file (such as an *.FBX*), you can add animations using the Animations tab in its import settings as shown here:</summary><p>
</p><p>One thing to note in this video is that the <code>Average Velocity</code> of the imported animation has some movement on the <code>X</code> axis even though we only want it to go straight forwards, so we can adjust the <code>Root Transform Rotation Offset</code> to straighten it out.</p>
<img src="fbx-add-animation.gif" class="img-responsive">
<p></p></details><p></p>
<p>Otherwise if you have a separate <em>.anim</em> file you can simply select the original <code>AnimationClip</code> and use the <code>Edit/Duplicate</code> function (<code>Ctrl + D</code>) to make a copy of it then rename it as necessary.</p>
<h2 id="audio-source">Audio Source</h2>
<p>Another difference is that since the <code>AnimationClip</code> is an asset, it cannot reference scene objects because an asset can be used in any scene so those particular objects may not exist. This means the event cannot directly reference the <code>AudioSource</code>s that will be used to play each sound so we need to set it up differently:</p>
<ol>
<li>Create another script that <a href="../../../introduction/cs/inheritance">Inherits</a> from the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script.</li>
</ol>
<pre><code class="language-cs">public sealed class <a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a> : <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a>
{
</code></pre>
<ol start="2">
<li>Use an array to hold the <code>AudioSource</code>s:</li>
</ol>
<pre><code class="language-cs">    // Element 0 will be the Left Foot.
    // Element 1 will be the Right Foot.
    [SerializeField] private AudioSource[] _FootSources;
</code></pre>
<p><img src="footstep-events-animation.png" class="img-responsive"></p>
<ol start="3">
<li>Add a method which takes an <code>int</code> parameter to specify which foot and passes the associated <code>AudioSource</code> into the <code>PlaySound</code> method we <a href="../../../introduction/cs/inheritance">Inherited</a> from <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code>:</li>
</ol>
<pre><code class="language-cs">    private void Footstep(int foot)
    {
        PlaySound(_FootSources[foot]);
    }
}
</code></pre>
<p>This will be the method that the events call, using their Int Parameter to specify the associated foot since they cannot directly reference it.</p>
<h2 id="adding-events">Adding Events</h2>
<p>If your animation is imported as part of a model file (such as an FBX), you can add animation events using the Events foldout in the Animations tab in its import settings:</p>
<table class="table">
  <thead>
    <tr><th style="width:50%">Left Foot</th>
    <th style="width:50%">Right Foot</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>Put the first event just as the left foot touches down. Leave its Int Parameter at 0.</td>
      <td>Put the second event just as the right foot touches down. Set its Int Parameter to 1.</td>
    </tr>
    <tr>
      <td><img src="fbx-event-left.png" class="img-responsive"></td>
      <td><img src="fbx-event-right.png" class="img-responsive"></td>
    </tr>
    <tr>
      <td colspan="2">Note that the frame numbers shown above are relative to the file rather than the start of the animation. It starts at frame 30, so 31 is actually the second frame.</td>
    </tr>
  </tbody>
</table>
<p></p><details><summary>Otherwise if you have a separate <em>.anim</em> file the process is much less convenient because you need to add events using the Animation window which is not automatically synchronised with the Inspector preview so you need to manually match the frame numbers:</summary><p>
<img src="anim-add-events.gif" class="img-responsive">
</p></details><p></p>
<p>When an <a href="../../../manual/events/animation">Animation Event</a> occurs, Unity searches through all scripts attached to the same object as the <code>Animator</code> to call any methods it finds with the specified function name, which is <code>Footstep</code> in this case. In the script we gave the method an <code>int</code> parameter, so Unity will pass in the <code>Int</code> value we set on the event (0 or 1 to indicate left or right).</p>
<h1 id="conclusion">Conclusion</h1>
<p>The <a href="../../../manual/events/animancer">Animancer Events</a> system is clearly superior for this particular example because it could be set up directly where we needed the events so they could directly reference the objects they interact with and did not require a duplicate of the <code>AnimationClip</code>, but that will not always be the case. You may encounter situations where <a href="../../../manual/events/animation">Animation Events</a> are more useful so it is important to understand all the tools you have available.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>