<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 02 Playing and Fading</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Docs</a></li>
        <li><a href="/animancer/faq"><img src="/animancer/images/faq.png" height="20" style="position:relative; left:-4px; top:-1px;"> FAQ</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v3.1</a></li>
        <li><a href="https://forum.unity.com/threads/566452"><img src="/animancer/images/forum.png" height="20" style="position:relative; left:-4px; top:-1px;"> Forum</a></li>
        <li><a href="mailto:AnimancerUnityPlugin@gmail.com?subject=Animancer"><img src="/animancer/images/contact.png" height="20" style="position:relative; left:-4px; top:-1px;"> Contact</a></li>
        <li><a href="/animancer/lite"><img src="/animancer/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Try</a></li>
        <li><a href="/animancer/pro"><img src="/animancer/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Buy</a></li>
        <li><a href="https://kybernetikgames.github.io/kailas-dierk/unity-assets"><img src="/animancer/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#play">Play</a></p>
<p><a href="#play-then-idle">Play then Idle</a></p>
<p><a href="#play-from-start">Play from Start</a></p>
<p><a href="#play-from-start-then-idle">Play from Start then Idle</a></p>
<p><a href="#crossfade">CrossFade</a></p>
<p><a href="#crossfade-then-idle">CrossFade then Idle</a></p>
<p><a href="#bad-crossfade-from-start">Bad CrossFade from Start</a></p>
<p><a href="#good-crossfade-from-start">Good CrossFade from Start</a></p>
<p><a href="#good-crossfade-from-start-then-idle">Good CrossFade from Start then Idle</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/feature-comparison">Feature Comparison</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why-replace-mecanim">Why Replace Mecanim?</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview active">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/basic-scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/simple-playing">01 Simple Playing</a></li>
                <li class="selected"><a href="/animancer/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/docs/examples/basics/named-animations">04 Named Animations</a></li>
                <li><a href="/animancer/docs/examples/basics/hybrid-system">05 Hybrid System</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animation-events">05 Animation Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animation-events/simple-and-end-events">01 Simple and End Events</a></li>
                <li><a href="/animancer/docs/examples/animation-events/other-events">02 Other Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/state-machines">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/state-machines/creatures">01 Creatures</a></li>
                <li><a href="/animancer/docs/examples/state-machines/interrupt-management">02 Interrupt Management</a></li>
                <li><a href="/animancer/docs/examples/state-machines/brains">03 Brains</a></li>
                <li><a href="/animancer/docs/examples/state-machines/more-brains">04 More Brains</a></li>
                <li><a href="/animancer/docs/examples/state-machines/platformer">05 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/inverse-kinematics">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/inverse-kinematics/puppet">01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/inverse-kinematics/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/hybrid">01 Hybrid</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Original</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>

                    </ul>
                </li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing-animations">Playing Animations</a></li>
                <li><a href="/animancer/docs/manual/states">States</a></li>
                <li><a href="/animancer/docs/manual/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/component-types">Component Types</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/finite-state-machines">Finite State Machines</a></li>
                <li><a href="/animancer/docs/manual/state-serializables">State Serializables</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/docs/manual/animation-events">Animation Events</a></li>
                <li><a href="/animancer/docs/manual/inverse-kinematics">Inverse Kinematics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/inconsistent-timing">Inconsistent Timing</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/resetting-animated-values">Resetting Animated Values</a></li>
                <li><a href="/animancer/docs/bugs/root-motion-interpolation">Root Motion Interpolation</a></li>
                <li><a href="/animancer/docs/bugs/unused-graph-destroy-warning">Unused Graph Destroy Warning</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/ideas">Ideas</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v4-0">Progress of v4.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>02 Playing and Fading</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><strong>Location</strong>: <em>Assets/Plugins/Animancer/Examples/01 Basics/02 Playing and Fading</em></p>
<p><strong>Namespace</strong>: <a href="../../../../api/Animancer.Examples.Basics"><code>Animancer.Examples.Basics</code></a></p>
</blockquote>
<p>This example compares the common ways to play and transition between two animations:</p>
<p></p><table>
  <thead><tr>
  <td style="text-align:center">Idle</td>
  <td style="text-align:center">Golf Swing</td>
  </tr></thead>
  <tbody><tr>
  <td><img src="idle.gif" class="img-responsive"></td>
  <td><img src="swing.gif" class="img-responsive"></td>
  </tr>
</tbody></table><p></p>
<p>The <a href="../basic-scene-setup">Basic Scene Setup</a> is the same as the first example, but this time we're using the <code><a href="/animancer/api/Animancer.Examples.Basics/PlayingAndFading">PlayingAndFading</a></code> script instead of <code><a href="/animancer/api/Animancer.Examples.Basics/PlayAnimationOnClick">PlayAnimationOnClick</a></code>. The two scripts look quite similar, but instead of an <code>Update</code> method this one has a bunch of <code>public</code> methods which are called by UI <code>Button</code>s under the <em>Canvas</em> object.</p>
<h1 id="play">Play</h1>
<p>First off we simply try to <code>Play</code> the action animation like so:</p>
<pre><code class="language-cs">public void Play()
{
    _Animancer.Play(_Action);
}
</code></pre>
<p>Which gives us this when we go into Play Mode:</p>
<p><img src="play.gif" style="height:300px"></p>
<p>The <em>Idle</em> animation is looping (the <code>Loop Time</code> toggle is enabled in its import settings), meaning that every time it gets to the end it will just start again.</p>
<p>The <em>GolfSwing</em> animation is not looping, meaning that it will play through once then freeze indefinitely on the last frame.</p>
<p></p><details><summary>That method is so simple we could <em>almost</em> just have the UI Button play the animation directly.</summary><p>
</p><p>The UI <code>Button</code> component uses a <code>UnityEvent</code> field to allow the user to specify what they want the button to do when clicked using the Inspector. Unfortunately the <code>UnityEvent</code> implementation has two limitations that prevent it from being able to directly call <code>AnimancerComponent.Play</code>:</p>
<ol>
<li><code>UnityEvent</code>s don't allow more than one parameter. <code>Play</code> actually has two parameters: the <code>AnimationClip</code> to play and an <code>int layerIndex</code> to determine which layer to play it on. The <code>layerIndex</code> has a default value of 0 to always use the base layer when no value is specified, but the method still technically has two parameters so <code>UnityEvent</code>s can't call it.</li>
<li><code>UnityEvent</code>s also don't allow methods with a return type. <code>Play</code> returns the <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> of the animation being played, so even though we don't actually want to do anything with it the <code>UnityEvent</code> simply doesn't allow that method to be selected.</li>
</ol>
<p>These limitations can be avoided with a plugin called <a href="https://kybernetikgames.github.io/ultevents">UltEvents</a> (also made by <a href="https://kybernetikgames.github.io/kailas-dierk/unity-assets/">Kybernetik</a> like Animancer). Unfortunately, it is not possible to directly change the inbuilt <code>Button</code> component to use an <code>UltEvent</code> instead of a <code>UnityEvent</code>, but it has an <code>UltEventHolder</code> component which you could add to a <code>Button</code>. Have the <code>Button</code> call the <code>UltEventHolder</code>s <code>Invoke</code> method and configure the event you want in the <code>UltEventHolder</code> instead. It also means that you can use <code>UltEvent</code>s in your own scripts any time you would normally use a <code>UnityEvent</code> to make use of the superior features and improved Inspector interface.</p>
<p></p></details><p></p>
<h1 id="play-then-idle">Play then Idle</h1>
<p>Most of the time you don't want a character to just freeze once they finish an animation, you want them so start doing something else. In this simple example that means we want them to just return to the <em>Idle</em> animation using the <code>OnEnd</code> callback <a href="../simple-playing#on-end-event">as mentioned in the first example</a>, so our next method looks like this:</p>
<pre><code class="language-cs">public void PlayThenIdle()
{
    _Animancer.Play(_Action).OnEnd = () =&gt; _Animancer.Play(_Idle);
}
</code></pre>
<p><img src="play-then-idle.gif" style="height:300px"></p>
<p>That might not be what you expected because the <code>Play</code> method does not automatically restart the animation. The <em>GolfSwing</em> was already playing from before, so the <code>Play</code> call did basically nothing and then we registered an <code>OnEnd</code> callback which got triggered the very next frame because the animation was already past its end. The next section (<a href="#play-from-start">Play from Start</a>) explains why it works like this, so let's ignore it for now.</p>
<p>Clicking the button again after that plays it and returns to idle as expected and clicking it repeatedly doesn't interrupt the animation if it is already playing.</p>
<p>The description of the <code><a href="/animancer/api/Animancer/AnimancerState/4763F42D">AnimancerState.OnEnd</a></code> callback (&lt;- that's a link) explains that playing a new animation clears the <code>OnEnd</code> callbacks of all previous animations so that you don't have to worry about other scripts that might have used the same animation previously (it also includes an example and explains why it is implemented like that). This means that each time <code>PlayThenIdle</code> is called, it clears whatever callbacks might have previously been given to the <code>OnEnd</code> callback and assigns its own, effectively taking responsibility for the animation it is playing.</p>
<h1 id="play-from-start">Play from Start</h1>
<p>Often when triggering an animation you will want to ensure that it starts from the beginning, even if it was already playing. To do that, you can set the <code><a href="/animancer/api/Animancer/AnimancerState/840B3EB1">AnimancerState.Time</a> = 0</code>:</p>
<pre><code class="language-cs">public void PlayFromStart()
{
    _Animancer.Play(_Action).Time = 0;
}
</code></pre>
<p><img src="play-from-start.gif" style="height:300px"></p>
<p>This time, even if we click the button in the middle of the animation it will always snap back to the start and play from there.</p>
<p>The default behaviour means we can lazily call <code>Play</code> to ensure that a particular animation is playing rather than needing to manually check that it isn't already playing (or fading out) before we call <code>Play</code>.</p>
<h1 id="play-from-start-then-idle">Play from Start then Idle</h1>
<p>For the sake of completeness, this method combines the previous two so that it always starts from the beginning and returns to <em>Idle</em> at the end.</p>
<pre><code class="language-cs">public void PlayFromStartThenIdle()
{
    var state = _Animancer.Play(_Action);
    state.Time = 0;
    state.OnEnd = () =&gt; _Animancer.Play(_Idle);
}
</code></pre>
<p><img src="play-from-start-then-idle.gif" style="height:300px"></p>
<h1 id="crossfade">CrossFade</h1>
<p>Instead of immediately snapping the character's pose to the new animation, it is often desirable to transition towards it over time to give the impression of smooth motion. This is called "<a href="../../../manual/blending/fading"><em>Cross Fading</em></a>", which can be done by simply calling <code>AnimancerComponent.CrossFade</code> instead of <code>Play</code>.</p>
<pre><code class="language-cs">public void CrossFade()
{
    _Animancer.CrossFade(_Action);

    // The optional 'fadeDuration' parameter specifies how long it will take (in seconds).
    // _Animancer.CrossFade(_Action, 0.5f);// This will take 0.5 seconds.
    // If not specified, the default duration is 0.3 seconds.
}
</code></pre>
<p><img src="crossfade.gif" style="height:300px"></p>
<p>Note how the <code>Weight</code>s on the right of the Inspector change over time instead of snapping to their target value instantly.</p>
<p>Also note that <code>OnEnd</code> callbacks are cleared by <code>CrossFade</code> just as with <code>Play</code> rather than only clearing them once the animations finish fading out. For example, if an <em>Attack</em> animation is interrupted by <em>Flinch</em>, the moment it starts fading the script that started it takes over responsibility for the creature's animations, even while the <em>Attack</em> animation is still fading out.</p>
<h1 id="crossfade-then-idle">CrossFade then Idle</h1>
<p>Same as with <code>Play</code>, we want to go back to <em>Idle</em> once the <em>GolfSwing</em> ends, but this time we can do it smoothly.</p>
<pre><code class="language-cs">public void CrossFadeThenIdle()
{
    _Animancer.CrossFade(_Action).OnEnd = () =&gt; _Animancer.CrossFade(_Idle);
}
</code></pre>
<p>Just like with <a href="#play-then-idle">Play then Idle</a>, if we do this when the character is already at the end of the animation he goes straight back to <em>Idle</em>, though this time it does it smoothly.</p>
<p><img src="crossfade-then-idle.gif" style="height:300px"></p>
<h1 id="bad-crossfade-from-start">Bad CrossFade from Start</h1>
<p>Since <code>...Play(_Action).Time = 0;</code> allows you to ensure that the animation plays from the start, you might try to do the same thing with <code>CrossFade</code>.</p>
<pre><code class="language-cs">public void BadCrossFadeFromStart()
{
    _Animancer.CrossFade(_Action).Time = 0;
}
</code></pre>
<p><img src="bad-crossfade-from-start.gif" style="height:300px"></p>
<p>This works fine when transitioning from another animation, but instantly snapping the <code>Time</code> back to the start prevents it from executing a smooth transition back to the start of the same animation because an <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> only has one <code>Time</code> value; it can either be at its previous value or at the beginning, but not both and trying to interpolate between the two would mean it plays backwards for a moment which isn't very useful either.</p>
<h1 id="good-crossfade-from-start">Good CrossFade from Start</h1>
<p>Fortunately, Animancer's <code>CrossFadeFromStart</code> method handles this for you.</p>
<pre><code class="language-cs">public void GoodCrossFadeFromStart()
{
    _Animancer.CrossFadeFromStart(_Action);
}
</code></pre>
<p><img src="good-crossfade-from-start.gif" style="height:300px"></p>
<p>When it tries to fade into an animation that is already playing it creates a second <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> to play the same <code>AnimationClip</code> so that the original can continue playing as it fades out while the new one fades in from the start. In this case it still looks rather silly because it doesn't make sense to interrupt a golf swing like that, but the point is that it transitions smoothly instead of snapping back to the start instantly.</p>
<p>If you click the button rapidly it will continue creating new states until it has 5, then it will throw an <code>ArgumentOutOfRangeException</code>. This is an intentional safety measure since it is unlikely that you would actually want that many copies of an animation playing at once so it is a likely indication of a bug in your code (and it certainly looks silly in this example). However, if you really do want to have many copies for whatever reason, you can simply set <code>AnimancerLayer.MaxCrossFadeFromStartDepth</code> to a higher value beforehand.</p>
<h1 id="good-crossfade-from-start-then-idle">Good CrossFade from Start then Idle</h1>
<p>Again for the sake of completeness, let's combine the two.</p>
<pre><code class="language-cs">public void GoodCrossFadeFromStartThenIdle()
{
    _Animancer.CrossFadeFromStart(_Action).OnEnd = () =&gt; _Animancer.CrossFade(_Idle);
}
</code></pre>
<p><img src="good-crossfade-from-start-then-idle.gif" style="height:300px"></p>
<p>Note how we're still using the regular <code>CrossFade</code> for the return transition to <em>Idle</em> since we don't actually care what <code>Time</code> that animation is at and it's unlikely that we would try to transition back to idle repeatedly anyway.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>