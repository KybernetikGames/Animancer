<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - Animation Mixers</title>
        <link href="/animancer/assets/css/mermaid.css" rel="stylesheet">
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="18" width="18"> User Manual</a></li>
        <li><a href="/animancer/faq"><img src="/animancer/images/faq.png" height="18" width="18"> FAQ</a></li>
        <li><a href="/animancer/blog"><img src="/animancer/images/blog.png" height="18" width="18"> Blog</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerController"><img src="/animancer/images/api.png" height="18" width="18"> API v2.0</a></li>
        <li><a href="http://u3d.as/19Xd"><img src="/animancer/images/unity-logo.png" height="18" width="18"> Try</a></li>
        <li><a href="http://u3d.as/19Xb"><img src="/animancer/images/unity-logo.png" height="18" width="18"> Buy</a></li>
        <li><a href="mailto:AnimancerUnityPlugin@gmail.com?subject=Animancer"><img src="/animancer/images/contact.png" height="18" width="18"> Contact</a></li>
        <li><a href="https://assetstore.unity.com/publishers/16747"><img src="/animancer/images/kybernetik.png" height="18" width="18"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#choosing-a-mixer">Choosing a Mixer</a></p>
<p><a href="#using-a-mixer">Using a Mixer</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/introduction">Introduction</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/mecanim-vs-animancer/play-an-animation">Play an Animation</a></li>
                <li><a href="/animancer/docs/mecanim-vs-animancer/smooth-transitions">Smooth Transitions</a></li>
                <li><a href="/animancer/docs/mecanim-vs-animancer/animation-end-events">Animation End Events</a></li>
                <li><a href="/animancer/docs/mecanim-vs-animancer/reusing-scripts">Reusing Scripts</a></li>
                <li><a href="/animancer/docs/mecanim-vs-animancer/directional-movement">Directional Movement</a></li>
                <li><a href="/animancer/docs/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/using-animancer">Using Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/using-animancer/playing-animations">Playing Animations</a></li>
                <li><a href="/animancer/docs/using-animancer/animancer-controller-types">Animancer Controller Types</a></li>
                <li><a href="/animancer/docs/using-animancer/the-animancer-inspector">The Animancer Inspector</a></li>
                <li><a href="/animancer/docs/using-animancer/smooth-transitions">Smooth Transitions</a></li>
                <li><a href="/animancer/docs/using-animancer/animancer-states">Animancer States</a></li>
                <li><a href="/animancer/docs/using-animancer/animator-controller-states">Animator Controller States</a></li>
                <li class="selected"><a href="/animancer/docs/using-animancer/animation-mixers">Animation Mixers</a></li>
                <li><a href="/animancer/docs/using-animancer/animation-layers">Animation Layers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/programming-patterns">Programming Patterns</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/programming-patterns/animation-events">Animation Events</a></li>
                <li><a href="/animancer/docs/programming-patterns/pre-loading">Pre-Loading</a></li>
                <li><a href="/animancer/docs/programming-patterns/finite-state-machines">Finite State Machines</a></li>
                <li><a href="/animancer/docs/programming-patterns/reference-grouping">Reference Grouping</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/unity-bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/unity-bugs/resetting-animated-values">Resetting Animated Values</a></li>
                <li><a href="/animancer/docs/unity-bugs/root-motion-interpolation">Root Motion Interpolation</a></li>
                <li><a href="/animancer/docs/unity-bugs/inverse-kinematics">Inverse Kinematics</a></li>
                <li><a href="/animancer/docs/unity-bugs/inconsistent-timing">Inconsistent Timing</a></li>
                <li><a href="/animancer/docs/unity-bugs/update-modes">Update Modes</a></li>
                <li><a href="/animancer/docs/unity-bugs/unused-graph-destroy-warning">Unused Graph Destroy Warning</a></li>
                <li><a href="/animancer/docs/unity-bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/unity-bugs/editor-script-changing-assemblies">Editor Script Changing Assemblies</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source-code">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source-code/performance-benchmarks">Performance Benchmarks</a></li>
                <li><a href="/animancer/docs/source-code/directory-structure">Directory Structure</a></li>
                <li><a href="/animancer/docs/source-code/the-playable-graph">The Playable Graph</a></li>
                <li><a href="/animancer/docs/source-code/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source-code/coding-standard">Coding Standard</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/change-log">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/change-log/future-roadmap">Future Roadmap</a></li>
                <li><a href="/animancer/docs/change-log/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/change-log/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/change-log/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/change-log/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/change-log/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Animation Mixers</h1>
		</section>
	<section class="content">
		<p><em><a href="http://u3d.as/19Xb"><strong>Pro Only</strong></a>: Animancer Lite allows you to try out this feature in the Unity Editor, but it will not be available in a runtime build unless you purchase Animancer Pro.</em></p>
<p><code><a href="/animancer/api/Animancer/AnimationMixer">AnimationMixer</a></code>s serve the same purpose as Mecanim Blend Trees; they allow you to interpolate between multiple animations based on a parameter. For example, you might blend between <em>idle</em>, <em>walk</em>, and <em>run</em> based on how fast you want to move so that you can have your character animate appropriately for any speed based on how far the user tilts a joystick instead of only having a few specific speeds you can move at.</p>
<p>Similarly to Animancer in general, mixers are a more code-based approach than Blend Trees:</p>
<ul>
<li>Mixers are created dynamically at runtime. This means they are more flexible in how they can be used.</li>
<li>Blend Trees are created manually in the Unity Editor. They have a user-friendly interface for setting up their structure and previewing the animations, however their structure cannot be changed at runtime. You can play and control Blend Trees in Animancer using <a href="../using-animancer/animator-controller-states#parameter-controller-states">Parameter Controller States</a>.</li>
<li>By being defined in the Unity Editor, Blend Trees are able to analyse their animations so that their walk cycles can be synchronised (right foot touch down and lift up at the same time, etc.), which is especially important for animations of different lengths. Unfortunately that analysis is not possible at runtime (and would be quite expensive to performance even if it was) so Animancer is unable to do the same thing in <code><a href="/animancer/api/Animancer/AnimationMixer">AnimationMixer</a></code>s.</li>
<li>Mixers also generally have an advantage in the way they <a href="../unity-bugs/root-motion-interpolation">interpolate root motion</a>.</li>
</ul>
<h1 id="choosing-a-mixer">Choosing a Mixer</h1>
<p>The system includes several different mixer types:</p>
<table class="table">
<thead>
<tr>
<th>Mixer Type</th>
<th>Parameter / Thresholds</th>
<th>Interpolation Algorithm</th>
<th>Equivalent Mecanim Blend Tree</th>
</tr>
</thead>
<tbody>
<tr>
<td><code><a href="/animancer/api/Animancer/LinearAnimationMixer">LinearAnimationMixer</a></code></td>
<td><code>float</code></td>
<td>Linear</td>
<td>1D</td>
</tr>
<tr>
<td><code><a href="/animancer/api/Animancer/CartesianAnimationMixer">CartesianAnimationMixer</a></code></td>
<td><code>Vector2</code></td>
<td>Gradient Band</td>
<td>2D Freeform Cartesian</td>
</tr>
<tr>
<td><code><a href="/animancer/api/Animancer/DirectionalAnimationMixer">DirectionalAnimationMixer</a></code></td>
<td><code>Vector2</code></td>
<td>Polar Gradient Band</td>
<td>2D Freeform Directional</td>
</tr>
</tbody>
</table>
<p>Each state in a mixer has a threshold value which determines the parameter value at which that state will become active and how it blends in relation to the other states when the parameter is between thresholds. You can either specify the thresholds manually or calculate them using <code>AnimationMixer&lt;T&gt;.CalculateThresholds</code>. The <code><a href="/animancer/api/Animancer/AnimancerExtensions">AnimancerExtensions</a></code> class also provides <code>CalculateThresholdsFromAverageVelocityXZ</code> as an extension method for <code>Vector2</code> based mixers (Cartesian and Directional) to calculate the thresholds based on the average root motion velocity of each state on the X and Z axes. Note that this method needs the “<em>Bake Into Pose</em>” toggle to be disabled for “<em>Root Transform Position (XZ)</em>” on the import settings of each <code>AnimationClip</code> in the mixer.</p>
<p>When selecting a 2D mixer, Directional generally offers better interpolation than Cartesian for animations that represent direction such as move forward/back/left/right. Also note that in areas with 180 degrees or more between states the interpolation is ill-defined and will likely have undesirable results; I.E. if you have clips for <em>forward</em>, <em>back</em>, and <em>left</em>, but no <em>right</em>, then you will get odd results if you set the parameter to the right.</p>
<p><code><a href="/animancer/api/Animancer/AnimationMixer">AnimationMixer</a></code>s are a type of <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> with several other differences from regular <code><a href="/animancer/api/Animancer/ClipState">ClipState</a></code>s:</p>
<ul>
<li>The <code>Clip</code> property of a mixer will always return null.</li>
<li>States inside an <code><a href="/animancer/api/Animancer/AnimationMixer">AnimationMixer</a></code> are not registered in the internal <a href="animancer-states">Dictionary</a>. If you need to access these states directly you must do so via their index in the mixer itself. All inbuilt mixers expose their <code>States</code> as an array.</li>
<li>Since mixers don’t have a duration or time of their own, they don’t actually have <code>OnEnd</code> events but will instead register any delegates they are given to all of their child states.</li>
</ul>
<h1 id="using-a-mixer">Using a Mixer</h1>
<ol>
<li>Select a mixer type from the table above and make a <code>new</code> one using any of its <a href="animancer-states#state-constructors">constructors</a>. For example, <code>new <a href="/animancer/api/Animancer/LinearAnimationMixer">LinearAnimationMixer</a></code>.</li>
<li>Call one of the <code>Initialise</code> methods on the mixer:</li>
</ol>
<ul>
<li><code>Initialise(portCount)</code> allocates room for the specified number of states which can be filled individually using <code>CreateState</code> or by passing the mixer into the constructor or <code>SetParent</code> method of any state type. This even lets you nest mixers inside each other.</li>
<li><code>Initialise(clips, thresholds)</code> allocates a <code><a href="/animancer/api/Animancer/ClipState">ClipState</a></code> for each of the <code>clips</code> and assigns their corresponding <code>thresholds</code>.</li>
</ul>
<ol start="3">
<li>Make sure all states have been assigned thresholds to determine the parameter values where they will be used and how they will blend in relation to other states. This can be done using optional parameters in the <code>Initialise</code> and <code>CreateState</code> methods, or by calling <code>SetThreshold</code> or <code>SetThresholds</code>.</li>
<li>Store a reference to the mixer so you can set its <code>Parameter</code> later on to control its blending.</li>
</ol>
<p>The following example script uses a <code><a href="/animancer/api/Animancer/LinearAnimationMixer">LinearAnimationMixer</a></code> to blend between <code>idle</code> and <code>run</code> animations based on a <code>movementSpeed</code> slider in the inspector:</p>
<pre><code>using UnityEngine;

namespace Animancer
{
    // Simple example of an Animation Mixer (similar to Mecanim Blend Trees).
    [RequireComponent(typeof(AnimancerController))]
    public sealed class LinearAnimationMixerExample : MonoBehaviour
    {
        /**********************************************************************/

        public <a href="/animancer/api/Animancer/AnimancerController">AnimancerController</a> animancer;
        public AnimationClip idle;
        public AnimationClip run;

        [Range(0, 1)]
        public float movementSpeed;

        // Keep the mixer after is is created so we can easily set the Parameter
        // when we need to change it.
        private <a href="/animancer/api/Animancer/LinearAnimationMixer">LinearAnimationMixer</a> _MovementMixer;

        /**********************************************************************/

        private void Awake()
        {
            // Make a new mixer and connect it to the default layer.
            _MovementMixer = new LinearAnimationMixer(animancer);

            // Optionally call AddState to register the mixer with a key so it
            // can be accessed from other scripts using that key.
            animancer.AddState("Movement Mixer", _MovementMixer);

            // We could specify custom thresholds in the Initialise call, but
            // since we aren't it will use 0 and 1 respectively. Other overloads
            // of this method take 3 clips, or an array of any number of clips.
            _MovementMixer.Initialise(idle, run);

            // Play the mixer just like a regular clip.
            animancer.Play(_MovementMixer);
        }

        /**********************************************************************/

        private void Update()
        {
            // Assign the movement speed to the mixer's parameter to control its
            // current blending.
            _MovementMixer.Parameter = movementSpeed;
        }

        /**********************************************************************/
    }
}
</code></pre>
<p>The screenshot below shows the inspector for the example script. Unlike a regular <code><a href="/animancer/api/Animancer/ClipState">ClipState</a></code> that plays a single animation, the <code><a href="/animancer/api/Animancer/LinearAnimationMixer">LinearAnimationMixer</a></code> shows its child states in the form <code>[PortIndex] Threshold</code> with the ability to expand the details of both the mixer and child states.</p>
<p><img src="linear-animation-mixer-inspector.png" class="img-fluid" alt=""></p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).load(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        htmlLabels: false,
                        useMaxWidth:false
                    }
                });  
                mermaid.init(undefined, ".mermaid")
                $('svg').addClass('img-responsive');
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });
            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>