<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - Why Replace Mecanim?</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/docs/introduction/features"><img src="/animancer/images/features.png" height="20" style="position:relative; left:-7px; top:-1px;"> Features</a></li>
        <li><a href="/animancer/docs/download"><img src="/animancer/images/download.png" height="20" style="position:relative; left:-7px; top:-1px;"> Download</a></li>
        <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Documentation</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/help.png" height="20" style="position:relative; left:-4px; top:-1px;"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v5.2</a></li>
        <li><a href="https://kybernetik.com.au/kailas-dierk/unity-assets"><img src="/animancer/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#delays-and-unreliability">Delays and Unreliability</a></p>
<p><a href="#magic-strings">Magic Strings</a></p>
<p><a href="#separation-of-concerns">Separation of Concerns</a></p>
<p><a href="#responsibilities">Responsibilities</a></p>
<p><a href="#runtime-control">Runtime Control</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/download">Download</a></li>
                <li class="treeview active">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview active">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="selected"><a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/cs">C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/cs/overview">Scripting Overview</a></li>
                <li><a href="/animancer/docs/introduction/cs/organisation">Organisation</a></li>
                <li><a href="/animancer/docs/introduction/cs/variables">Variables</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods">Methods</a></li>
                <li><a href="/animancer/docs/introduction/cs/inheritance">Inheritance</a></li>
                <li><a href="/animancer/docs/introduction/cs/vectors">Vectors</a></li>
                <li><a href="/animancer/docs/introduction/cs/other">Other Topics</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li><a href="/animancer/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/docs/examples/basics/named-animations">04 Named Animations</a></li>
                <li><a href="/animancer/docs/examples/basics/hybrid">05 Hybrid Basics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>
                <li><a href="/animancer/docs/examples/fine-control/update-rate">04 Update Rate</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/events/footsteps">01 Footstep Events</a></li>
                <li><a href="/animancer/docs/examples/events/golf">02 Golf Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fsm/creatures">01 Creatures</a></li>
                <li><a href="/animancer/docs/examples/fsm/interrupts">02 Interrupt Management</a></li>
                <li><a href="/animancer/docs/examples/fsm/brains">03 Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/more-brains">04 More Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/weapons">05 Weapons</a></li>
                <li><a href="/animancer/docs/examples/fsm/platformer">06 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/ik/puppet">01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/ik/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/hybrid">01 Hybrid Mini Game</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/jobs/two-bone-ik">01 Two Bone IK</a></li>
                <li><a href="/animancer/docs/examples/jobs/damping">02 Damping</a></li>
                <li><a href="/animancer/docs/examples/jobs/lean">03 Lean</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/docs/manual/events/animancer">Animancer Events</a></li>
                <li><a href="/animancer/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/fsm">Finite State Machines</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/events">Animation Events</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/docs/bugs/stabilize-feet">Stabilize Feet</a></li>
                <li><a href="/animancer/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Why Replace Mecanim?</h1>
		</section>
	<section class="content">
		<p>Unity’s <a href="https://docs.unity3d.com/Manual/class-AnimatorController.html">Mecanim Animator Controller</a> system was designed to be easily accessible to people without much programming experience. It manages to achieve that goal quite well at a basic level, but doing so creates the illusion that animations should define the way your game works when in fact the opposite is true. In theory it would be useful for non-programmers to be able to set up their characters using a visual interface that does not require any code, but in practice only the very simplest of behaviours can be implemented without code so an Animator Controller is useless on its own and when combined with scripts it becomes more complex and less flexible than simply defining all the necessary logic with scripts.</p>
<ul>
<li>Animator Controllers suffer from <a href="#delays-and-unreliability">Delays and Unreliability</a>, meaning that they do not respond to commands until their next update, they ignore some commands entirely, and they do not even allow you to easily verify which commands are followed or check other animation details.</li>
<li>Animator Controllers force you to rely on <a href="#magic-strings">Magic Strings</a>. Many people end up making dedicated scripts for <em>controlling animations</em> in order to cleanly manage interactions with their <em>Animator Controllers</em>, which wastes a lot of time and effort on the initial development and keeping everything in sync.</li>
<li>Animator Controllers cause ineffective <a href="#separation-of-concerns">Separation of Concerns</a> where you arbitrarily define some parts of your character's behaviour in the Animator Controller and other parts in your scripts. This makes debugging much harder because any bug could come from your script or the Animator Controller or a combination of the two and any change to one might break the other. It also makes it harder to ask for help online because you need to post your script as well as several pictures of various parts of the Animator Controller which you think are relevant.</li>
<li>Animator Controllers naively brute-force all <a href="#responsibilities">Responsibilities</a> into one place which prevents you from properly encapsulating individual aspects of a character as easily manageable or reusable groups.</li>
<li>Animator Controllers greatly limit your <a href="#runtime-control">Runtime Control</a> since everything needs to be manually configured in the Unity Editor and cannot be dynamically changed by scripts.</li>
<li>Animator Controller states do not even align with the background grid.</li>
</ul>
<p><img src="nightmare-controller.png" class="img-responsive"></p>
<p>This monstrosity was taken from an official Unity Blog post ironically titled "<a href="https://blogs.unity3d.com/2016/10/11/building-for-reuse-mecanim-on-recore/">Building for Reuse</a>". The sheer number of states and parameters turns it from a meaningful visualisation of a complex system into a convoluted mess that would be extremely difficult to work with. Programming patterns and other techniques that could normally be used to effectively develop something that complex simply cannot be used when everything is constrained by Animator Controllers.</p>
<p>If you are interested in a direct practical comparison between the two systems, the <a href="../../../examples/animator-controllers/3d-game-kit">3D Game Kit</a> example is dedicated to the process of converting an Animator Controller based character to use Animancer instead.</p>
<h1 id="delays-and-unreliability">Delays and Unreliability</h1>
<p>When you command an Animator Controller (such as changing its state or setting a parameter), it will not actually respond until the next time it gets updated and it might not even do what you want.</p>
<p>For example, if you call <code>Play</code> then check which state is currently playing it will still return the previous state until the next frame and if you call <code>Play</code> again during the same frame it will ignore each call after the first instead of ending up in the last state you told it to play:</p>
<pre><code class="language-cs">// Currently Playing Idle.

animator.Play("Jump");

var state = animator.GetCurrentAnimatorStateInfo(0);
Debug.Log(state.IsName("Jump"));
</code></pre>
<p>This has several issues:</p>
<ul>
<li>It logs false because it is still Idle. It will only be playing the <code>Jump</code> animation next frame.</li>
<li>To wait for the animation to finish, we first have to wait a frame before we can find out its length.</li>
<li>It assumes the <code>Jump</code> state is on layer 0 (it usually will be, but assumptions like that will cause bugs in more complex systems).</li>
<li>It is not possible to do something like <code>Debug.Log(state.name)</code> to find out what the state actually is.</li>
<li>That's a lot of text just to check what is playing.</li>
</ul>
<pre><code class="language-cs">// Assuming this happens in the same frame as the above.

animator.Play("Attack");

state = animator.GetCurrentAnimatorStateInfo(0);
Debug.Log(state.IsName("Attack"));
</code></pre>
<p>This has several more issues:</p>
<ul>
<li>It still logs false because it is still <code>Idle</code>.</li>
<li>But this time it will not be playing the <code>Attack</code> animation next frame, nor the frame after that. All <code>Play</code> calls after the first are totally ignored, though it gives no error or other indication that this is happening.</li>
<li>So in order to function reliably, the script needs to wait a frame, verify that the <code>Attack</code> animation is actually playing (and if not, play it and wait <em>another</em> frame and check again), then it can finally check how long that animation will actually take to play.</li>
</ul>
<p>On the other hand, Animancer responds to commands immediately, can properly handle multiple commands in the same frame, and allows you to easily check any details you want:</p>
<pre><code class="language-cs">AnimationClip jump, attack;

// Currently Playing Idle.

var jumpState = animancer.Play(jump);
Debug.Log(animancer.States.Current == jumpState);// True.
Debug.Log(animancer.IsPlaying(jump));// True.
Debug.Log(jumpState.IsPlaying);// True.
Debug.Log(jumpState.Clip.name);// The name of the AnimationClip.
Debug.Log(jumpState.Length);// The length of the AnimationClip.

var attackState = animancer.Play(attack);
Debug.Log(animancer.IsPlaying(jump));// False (not jumping anymore).
Debug.Log(jumpState.IsPlaying);// False (not jumping anymore).
Debug.Log(animancer.IsPlaying(attack));// True.
Debug.Log(attackState.IsPlaying);// True.
</code></pre>
<p>Note that you are also less likely to even need to know the animation length because Animancer has several inbuilt ways of <a href="../../../manual/events/end">Waiting for Animations to End</a>.</p>
<h1 id="magic-strings">Magic Strings</h1>
<p>A "magic" variable is an arbitrary value that is used to activate certain functionality in a program without being derived or retrieved in some way, it simply appears from nothing as if by magic. Likewise, a "magic string" is a <code>string</code> that is used to control something that it has no real connection with. Take the following code for example:</p>
<pre><code class="language-cs">[SerializeField]
private Animator _Animator;

public void PlayAttack()
{
    _Animator.Play("Attack");
}
</code></pre>
<p>In this case, <code>"Attack"</code> is a magic string. It's hard coded into the script without any explanation of what it is supposed to do or any validation to make sure it will actually work as intended. That line of code probably worked when it was written, but what about now? Maybe you're reading some code you wrote a while ago or someone else's code. Consider the following questions:</p>
<ol>
<li>Has a state with that name actually been set up in the Animator Controller? Are you sure it's not <code>"attack"</code> or <code>"Attack01"</code> or <code>"Light Attack"</code>? Better go check.</li>
<li>What other animations are there to choose from? Better go check.</li>
<li>What will happen when that animation finishes? Nothing? Maybe a transition? Maybe there's a parameter you need to set to determine which transition it will use? Better go check.</li>
<li>How can you make sure everything is spelled correctly? Better go check.</li>
<li>What else do you need to modify if you want to rename it to <code>"Light Attack"</code> because you are about to add a <code>"Heavy Attack"</code>? Better go check. The state in the Animator Controller of course, but what else? What if there's another script relying on a string that was entered in the Inspector so a <code>Ctrl + F</code> to find the text <code>"Attack"</code> in your scripts won't even find it?</li>
<li>Is this script being used for multiple different Animator Controllers? Better go check. If it is then lucky you, now you get to re-check all those questions for each controller.</li>
</ol>
<p>There's a clear pattern here: every time you want to verify an aspect of its behaviour, you have to figure out where that behaviour is actually defined and go check it manually.</p>
<p>So how could this be improved? Well, you've probably already guessed that the answer is "by using Animancer". With it, the code could look like this:</p>
<pre><code class="language-cs">[SerializeField]
private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;

[SerializeField]
private AnimationClip _Attack;

public void PlayAttack()
{
    var state = _Animancer.Play(_Attack);
    state.OnEnd = OnAttackEnd;
}
</code></pre>
<p>This time we have slightly more complexity in the code, but less overall complexity because the logic is all in one place and does not require an Animator Controller to be set up separately. So what does that do to those questions from before?</p>
<ol>
<li>Irrelevant. The code defines the animation it will play. It will automatically create a state for the <code>_Attack</code> animation the first time it is passed into the <code>Play</code> method.</li>
<li>In this case there are no other animations to choose from because we only have one <code>AnimationClip</code> field. But if for example you set up a <code><a href="/animancer/api/Animancer.Examples.StateMachines.Weapons/Weapon">Weapon</a></code> class with various fields for all of the animations it can have, then your IDE would be able to give you a list of those fields to choose from and you could probably jump to that class with a single keypress if necessary (<code>F12</code> in Visual Studio).</li>
<li>It will call the <code>OnAttackEnd</code> method.</li>
<li>If you make a spelling mistake it will cause a compile error which points to the problem so you can fix it immediately.</li>
<li>You do not need to modify anything else, your IDE can rename all references to that field automatically. Though you could use a <a href="https://docs.unity3d.com/ScriptReference/Serialization.FormerlySerializedAsAttribute.html"><code>[FormerlySerializedAs]</code></a> attribute to ensure that any references previously assigned to the old field name will be kept by the new one.</li>
<li>Irrelevant. This script defines its own behaviour instead of needing to fit in with the way Animator Controllers have been set up.</li>
</ol>
<h1 id="separation-of-concerns">Separation of Concerns</h1>
<p>There is a programming concept known as "<a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a>" which encourages you to <em>separate</em> your code into distinct sections which each cover different <em>concerns</em> (things the program needs to do). For example, if your game contains a <em>player</em> and <em>enemies</em> which can move around similarly but are controlled differently, instead of simply having one script for "everything the player does" and another for "everything an enemy does", you could separate the functionality for "moving a character" from the logic of "deciding where a character wants to move". This would allow you to modify the way characters move and have that change apply consistently to all characters or you could add a new type of enemy that uses different logic for deciding where to move without needing to implement the same movement code again.</p>
<p>Mecanim attempts to utilise this concept by separating the structure of states, transitions, and parameters in an Animator Controller from the rest of the game logic in scripts, but in practice those concerns often <em>need</em> to be coupled far too tightly for that separation to provide any practical benefit.</p>
<p><img src="state-machine-diagram.png" width="50%" class="img-right" style="padding-top:4px">This state diagram taken straight from the <a href="https://docs.unity3d.com/Manual/StateMachineBasics.html">Unity Manual</a> actually illustrates one of the problems with Mecanim quite effectively. To transition from the <em>Walk</em> state to the <em>Fall</em> state, a transition must be set up between those states so that a script can detect that the character is no longer on the ground and trigger it. Then when the script detects that the character is back on the ground it can try to go back to <em>Idle</em>, except there is no transition from <em>Fall</em> to <em>Idle</em> so nothing will happen. Development time was originally spent creating the state machine and the code logic separately, and now even more time needs to be spent figuring out whether the problem is a bug in the ground detection code or in the state machine (or both) and then fixing it without breaking anything else. The code is useless without the specific Animator Controller structure it expects and the Animator Controller is useless without code that specifically knows how to control it. Both sides are very tightly coupled to each other, but Mecanim forces them to be separate so you have to waste time getting them to work together and ensuring that changes to one do not break the other.</p>
<p>That problem would never occur with Animancer. You still need to detect when the creature leaves and returns to the ground, but when you tell it to play an animation it will simply play that animation. The script wants something done, so it tells Animancer exactly what to do.</p>
<h2 id="parameters">Parameters</h2>
<p>Another aspect of this problem is the way parameters work. In theory, they provide a useful abstraction between commands and actions. For example, to have a character perform a series of attacks as long as the player keeps pressing the attack button, you might create a trigger parameter which causes each transition to the next attack and have your script set that trigger every time the button is pressed. But in practice that creates a multitude of issues:</p>
<ul>
<li>Triggers stay active until a transition uses them, so if the player tries to attack while casting a spell or getting knocked over or performing some other action, they will wait until that action is done and then attack, possibly several seconds after they pressed the button (meaning the player does not necessarily still want to attack, so the controls would feel unresponsive).
<ul>
<li>This is generally solved by having your script manually reset the trigger after setting it, which means you need to wait for at least one frame and thus greatly increases the complexity of what would otherwise be very simple code.</li>
<li>You also need to make sure to reset the triggers for all other actions whenever you perform a new one. So when you attack, you need to reset the triggers for jump, dodge, block, interact, cast spell, dance, etc.</li>
</ul>
</li>
<li>Code almost always needs to know what state the character is in to determine things like whether they can move or whether other characters can talk to them. So now the script can't simply tell the Animator Controller to "Attack", it also needs to check if the current state is "Attack 1" or "Attack 2" or "Attack 3" or "Attack 4", up to however many attacks the character has. This means the theoretical separation of the "Attack" command from its effects is now ruined because the script needs to explicitly know about all the states involved anyway.</li>
<li>The user interface is missing many features that are standard in all code editing programs (IDEs like Visual Studio):
<ul>
<li>You can't simply view a list of all transitions that use a particular parameter.</li>
<li>You can't select two transitions to view them side by side.</li>
<li>You can't easily ensure that similar animations have similar state and transition settings (left/right or armed/unarmed pairs, up/down/left/right groups, etc).</li>
<li>When you look at the parameter in the <code>AnimatorController</code>, it gives no indication of which scripts intend to use it, if any. It doesn't even let you enter a description of what it is used for (not that it would help much because scripts wouldn't be able to see the description anyway).</li>
<li>Likewise, when you look at the script, it doesn't give a clear indication of which parameters it intends to use either. You need to read the whole script to find out its requirements and then you still need to figure out which <code>AnimatorController</code>s it is actually used with.</li>
</ul>
</li>
<li>Scripts can't easily validate their requirements upfront, such as checking if a required parameter exists when you add the script to an object, or even on startup. The only indication you get that it doesn't exist is when you run the game and try to actually set the parameter. This means that instead of getting a clear indication immediately when something has an issue, you have to test everything extensively. To be clear: extensive testing is good, but it should be your last line of defence against bugs, not your only defence.</li>
</ul>
<p>In Animancer, the same mechanic could be implemented using a simple array of animations and an index to remember the current one. All the details you need about a character's attacks are right there in your script so you can directly access anything you need.</p>
<h1 id="responsibilities">Responsibilities</h1>
<p>There is a programming concept known as the "<a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a>" which states that every class or function should have <em>responsibility</em> over a <em>single</em> part of the functionality of the overall application. This is extremely helpful for developing complex systems in a way that is easy to maintain as the application grows, yet Animator Controllers do not support that concept. Instead, these <a href="https://en.wikipedia.org/wiki/God_object">God Objects</a> are responsible for all the animations a character can perform, regardless of which systems actually use those animations.</p>
<p>Animancer gives you the freedom to define individual aspects of a character wherever they make the most sense, which often means creating your own logical groupings and wrappers for them so that multiple characters can share the same structure.</p>
<p>These groupings can be defined using a different approach depending on the circumstances:</p>
<ul>
<li><code>MonoBehaviour</code>s are attached to a specific <code>GameObject</code> in a scene or a prefab. This is useful if each group will generally be associated with one specific prefab or scene object so that you do not need a separate asset for each of them.</li>
<li><code>ScriptableObject</code>s are generally saved as isolated assets inside the project. This is useful for sharing animation groups among multiple prefabs and scene objects.
<ul>
<li>The <code><a href="/animancer/api/Animancer/DirectionalAnimationSet">DirectionalAnimationSet</a></code>s used in the <a href="../../../examples/directional-sprites">Directional Sprites</a> examples are an example of such a grouping.</li>
</ul>
</li>
</ul>
<p>Some examples:</p>
<ul>
<li>Instead of each individual <code>Attack</code> and <code>Skill</code> script needing to acquire its own references to the appropriate animations for your current weapon, the <code><a href="/animancer/api/Animancer.Examples.StateMachines.Weapons/Weapon">Weapon</a></code> itself could hold those animations. An array of attacks for a combo, alternatives for heavy attacks, a backstab, a custom idle or walk to hold the weapon correctly, and so on. Or rather than simply referencing an array of <code>AnimationClip</code>s for the attacks, the weapon could have an array of <code>AttackData</code> which contains the clip, damage value, damage type, force multiplier, etc. If you do use an <code>AttackData</code> class to wrap other statistics with the animations, a <code>MonoBehaviour</code> based approach would allow each weapon to have different stats, even if they have the same set of animations as another.</li>
<li>Instead of scattering your animation references among each individual locomotion script (walk, climb, swim, etc.) you could group them together into a <code>LocomotionData</code> class which allows you to define movement speeds and other parameters alongside the animations while remaining entirely separate from their attacks and other actions. If you find it likely that you will want to reuse a particular set of animations many times with different stats, a <code>ScriptableObject</code> based approach could allow you to define <code>LocomotionAnimations</code> separately from <code>LocomotionStats</code>.</li>
</ul>
<p>Using <a href="../../../manual/animator-controllers">Controller States</a> can also be an effective way of grouping certain animations together because they allow you to use multiple smaller Animator Controllers instead of a single large one.</p>
<h1 id="runtime-control">Runtime Control</h1>
<p>Animator Controllers can only be configured in the Unity Editor, then their structure is mostly fixed in place and either cannot be changed at runtime or requires some additional setup to make changes possible:</p>
<ul>
<li>You can't manually control animations in the Inspector.</li>
<li>You can't add new states. You can only use Animator Override Controllers to replace existing animations, meaning you often need to create dummy <code>AnimationClip</code>s and states with the sole purpose of being replaced.</li>
<li>You can't change parameter or transition details.</li>
<li>You can't control <a href="../speed-and-time#speed">animation speeds</a> unless you link them to a parameter.</li>
<li>You can't control <a href="../speed-and-time#time">animation time</a>, only normalized time.</li>
<li>You can't control animation weights or even check them for debugging.</li>
<li>You can't fade layer weights without updating them yourself over time.</li>
<li>You can't move animations to a different layer.</li>
<li>You can't change layer masks.</li>
<li>You can't enable or disable Inverse Kinematics (for example, to improve performance when not needed or when characters get far enough away from the camera).</li>
<li>You can't access any information about animations that aren't currently playing.</li>
<li>You can't access state names for debugging. You have to use hash codes.</li>
</ul>
<p>All of those things can easily be done with Animancer.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>