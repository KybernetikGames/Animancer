<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - Progress of v4.0</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Docs</a></li>
        <li><a href="/animancer/faq"><img src="/animancer/images/faq.png" height="20" style="position:relative; left:-4px; top:-1px;"> FAQ</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v3.1</a></li>
        <li><a href="https://forum.unity.com/threads/566452"><img src="/animancer/images/forum.png" height="20" style="position:relative; left:-4px; top:-1px;"> Forum</a></li>
        <li><a href="mailto:AnimancerUnityPlugin@gmail.com?subject=Animancer"><img src="/animancer/images/contact.png" height="20" style="position:relative; left:-4px; top:-1px;"> Contact</a></li>
        <li><a href="/animancer/lite"><img src="/animancer/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Try</a></li>
        <li><a href="/animancer/pro"><img src="/animancer/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Buy</a></li>
        <li><a href="https://kybernetikgames.github.io/kailas-dierk/unity-assets"><img src="/animancer/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#to-do">To Do</a></p>
<p><a href="#upgrade-guide">Upgrade Guide</a></p>
<p><a href="#features">Features</a></p>
<p><a href="#changes">Changes</a></p>
<p><a href="#improvements">Improvements</a></p>
<p><a href="#fixes">Fixes</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why-replace-mecanim">Why Replace Mecanim?</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/basic-scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/simple-playing">01 Simple Playing</a></li>
                <li><a href="/animancer/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/docs/examples/basics/named-animations">04 Named Animations</a></li>
                <li><a href="/animancer/docs/examples/basics/hybrid-system">05 Hybrid System</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animation-events">05 Animation Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animation-events/simple-and-end-events">01 Simple and End Events</a></li>
                <li><a href="/animancer/docs/examples/animation-events/other-events">02 Other Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/state-machines">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/state-machines/creatures">01 Creatures</a></li>
                <li><a href="/animancer/docs/examples/state-machines/interrupt-management">02 Interrupt Management</a></li>
                <li><a href="/animancer/docs/examples/state-machines/brains">03 Brains</a></li>
                <li><a href="/animancer/docs/examples/state-machines/more-brains">04 More Brains</a></li>
                <li><a href="/animancer/docs/examples/state-machines/platformer">05 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/inverse-kinematics">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/inverse-kinematics/puppet">01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/inverse-kinematics/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/hybrid">01 Hybrid</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Original</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>

                    </ul>
                </li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing-animations">Playing Animations</a></li>
                <li><a href="/animancer/docs/manual/states">States</a></li>
                <li><a href="/animancer/docs/manual/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/component-types">Component Types</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/finite-state-machines">Finite State Machines</a></li>
                <li><a href="/animancer/docs/manual/transitions">Transitions</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/docs/manual/animation-events">Animation Events</a></li>
                <li><a href="/animancer/docs/manual/inverse-kinematics">Inverse Kinematics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/inconsistent-timing">Inconsistent Timing</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/resetting-animated-values">Resetting Animated Values</a></li>
                <li><a href="/animancer/docs/bugs/root-motion-interpolation">Root Motion Interpolation</a></li>
                <li><a href="/animancer/docs/bugs/unused-graph-destroy-warning">Unused Graph Destroy Warning</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/ideas">Ideas</a></li>
                <li class="selected"><a href="/animancer/docs/changes/animancer-v4-0">Progress of v4.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Progress of v4.0</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p>2019-??-??</p>
</blockquote>
<p>Animancer v4.0 is currently in development. If you have any suggestions or would like to help test it, please <a href="https://forum.unity.com/threads/566452/">post in the Unity forums</a> or email <a href="mailto:AnimancerUnityPlugin@gmail.com?subject=Animancer">AnimancerUnityPlugin@gmail.com</a>.</p>
<p>This page was last updated on 2019-10-14 (it probably won't be updated regularly).</p>
<h1 id="to-do">To Do</h1>
<ul>
<li>Finish the new event system:
<ul>
<li>States now have an <code>EndEvent</code> property which is a struct containing both a time and callback so you can set animations to end early without needing to use Unity's <a href="../manual/animation-events#end-events">Animation Events</a>. The <code>OnEnd</code> property still exists and simply wraps the event to leave the time at the previous value (the end of the animation by default).</li>
<li>You can now add similar events anywhere throughout the animation, similar to Unity's <a href="../manual/animation-events#end-events">Animation Events</a>, but tied to a single state instead of every use of a particular <code>AnimationClip</code>.</li>
<li>You can access the details of the event currently being triggered using the static <code><a href="/animancer/api/Animancer/AnimancerEvent/6EBFA67C">AnimancerEvent.State</a></code> and <code>Event</code> properties.</li>
<li>Events currently need to be configured in code, but the goal is to store them in <code>Transition</code>s (formerly called Serializables) using <code>UnityEvent</code>s to set up the callbacks (with an easy alternative that uses <a href="https://kybernetikgames.github.io/ultevents/">UltEvents</a>).</li>
<li>Try to support events on <a href="../manual/blending/mixers">Mixers</a>. This will likely be possible if time synchronisation can be implemented (see below).</li>
<li>Try to support events on <a href="../manual/animator-controllers">Controller States</a>. This will be much harder to implement because it would need to account for internal state changes (so it can't just use the same code to check the time) and it would probably never be able to reliably trigger events at or near the of a state because it might already be part of the way into that state by the time Animancer gets a chance to detect the change.</li>
<li>Try to support conversion between <a href="../manual/animation-events#end-events">Animation Events</a> and Animancer Events.</li>
</ul>
</li>
<li>Finish the transition preview window. It's very bare bones at the moment, primarily waiting on the event system to be completed so it can be the main way of setting up events as well. Note that it will require Unity 2018.3+ since earlier versions couldn't properly play animations in Edit Mode.</li>
<li>Try to implement time synchronisation in <a href="../manual/blending/mixers">Mixers</a>. Proper <a href="../manual/blending/mixers#blend-trees-vs.mixers">Foot Phase Synchronisation</a> would be very difficult to implement even in the Unity Editor, but simply synchronising the normalized times of each animation should be fairly straightforward.</li>
<li>Investigate the possibility integration with Timeline and whether or not it would even be useful.</li>
<li>Consider re-grouping the state-related methods (<code>GetState</code>, <code>CreateState</code>, etc.) from <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code> and <code><a href="/animancer/api/Animancer/AnimancerLayer">AnimancerLayer</a></code> into dedicated collections as was done for layers (see the <a href="#restructuring">Restructuring</a> below).</li>
<li>Improve some of the examples:
<ul>
<li><a href="../examples/basics/root-motion">Basics/Root Motion</a> - explain how to steal root motion from the <code>Animator</code> and apply it to the <code>Rigidbody</code> (or <code>CharacterController</code>) on a parent object.</li>
<li><a href="../examples/animator-controllers/hybrid">Animator Controllers/Hybrid</a> - make the player walk over to the golf position instead of instantly teleporting.</li>
<li><a href="../examples/animator-controllers/3d-game-kit">Animator Controllers/3D Game Kit</a> - implement a hurt blend tree based on hit direction which can be tested by attacking a dummy character in the scene (to avoid needing to implement enemies and AI).</li>
</ul>
</li>
</ul>
<p>There are plenty of other minor things on my To-Do list as well and I'll likely add more as I think of ideas and people give me suggestions.</p>
<h1 id="upgrade-guide">Upgrade Guide</h1>
<h2 id="restructuring">Restructuring</h2>
<ul>
<li>Added <code><a href="/animancer/api/Animancer/AnimancerLayerList">AnimancerLayerList</a></code> to move all layer list functionality out of <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code>.
<ul>
<li>The list is exposed by the <code>Layers</code> property, so instead of things like <code>animancer.LayerCount</code> you now use <code>animancer.Layers.Count</code>.</li>
<li>Removed all the layer wrapper methods from <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code> since it now exposes the <code>Layers</code> property as well.</li>
<li><code>AnimancerPlayable.maxLayerCount</code> is now <code>AnimancerLayerList.defaultCapacity</code> and you can increase the <code>Capacity</code> of each list individually.</li>
</ul>
</li>
</ul>
<h2 id="renaming">Renaming</h2>
<ul>
<li>Renamed <code>AnimancerState.Serializable</code> and all its derived classes to <code>Transition</code>.</li>
<li>Renamed <code>Vector2ControllerState</code> to <code><a href="/animancer/api/Animancer/Float2ControllerState">Float2ControllerState</a></code> since it wraps two separate <code>float</code> parameters, even if it allows them to be accessed as a single <code>Vector2</code>.
<ul>
<li>Renamed <code>Vector3ControllerState</code> to <code><a href="/animancer/api/Animancer/Float3ControllerState">Float3ControllerState</a></code> for the same reason.</li>
<li>Renamed <code>FloatControllerState</code> to <code><a href="/animancer/api/Animancer/Float1ControllerState">Float1ControllerState</a></code> for consistency (and so it sorts before the other two).</li>
</ul>
</li>
<li>Renamed <code>Dispose</code> to <code>Destroy</code> and removed <code>IDisposable</code> from everything since they didn't follow regular disposal patterns. It doesn't make sense to put an <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> in a <code>using</code> statement and if you declare a <code>new <a href="/animancer/api/Animancer/ClipState">ClipState</a></code> locally, you don't need to dispose it because it will be cleaned up when the graph is destroyed.</li>
<li>Renamed <code>AnimancerNode.PortIndex</code> to <code>Index</code> (and associated method parameters and comments).</li>
<li>Renamed <code>HybridAnimancerComponent.PlayController</code> to <code>TransitionToController</code> since it uses a traisition rather than playing instantly.</li>
<li>Renamed <code>AnimancerLayer.CurrentStateID</code> to <code>CommandCount</code> (same in <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code>).</li>
<li>Renamed <code>IEarlyUpdate</code> to <code><a href="/animancer/api/Animancer/IAnimancerUpdatable">IAnimancerUpdatable</a></code>.</li>
</ul>
<h1 id="features">Features</h1>
<ul>
<li>Added a preview button to <code>Transition</code>s (formerly called Serializables) which opens an <code>EditorWindow</code> that allows you to preview the animation on your model while tweaking the transition.
<ul>
<li>Added <code><a href="/animancer/api/Animancer.Editor/SerializedPropertyAccessor">SerializedPropertyAccessor</a></code> which allows access to the underlying object of a <code>SerializedProperty</code>. The preview window uses it to get the actual <code>Transition</code> object to pass into the <code>AnimancerPlayable.Transition</code> method, but it is <code>public</code> so you can use it for your own editor scripts as well.</li>
</ul>
</li>
<li>Added <a href="../examples/basics/hybrid-system">Basics/Hybrid System</a> example to demonstrate the <code><a href="/animancer/api/Animancer/HybridAnimancerComponent">HybridAnimancerComponent</a></code> in a simple situation without the complexity of a full state machine in <a href="../examples/animator-controllers/hybrid">Animator Controllers/Hybrid</a>.</li>
<li>Replaced <code>AnimancerComponent.StopOnDisable</code> with <code>ActionOnDisable</code> which is an enum with several new values:
<ul>
<li><code>Stop</code> - The default value still stops all animations (same as <code>StopOnDisable = true</code> did).</li>
<li><code>Pause</code> - Pauses the graph so animations can resume from their current state afterwards (same as <code>StopOnDisable = false</code> did).</li>
<li><code>Continue</code> - Keeps playing while inactive.</li>
<li><code>Reset</code> - Resets the object to its bind pose. An Inspector message explains that <code>Reset</code> will only work if the <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code> is above the <code>Animator</code> and it shows a button to fix it.</li>
<li><code>Destroy</code> - Destroys the graph.</li>
</ul>
</li>
<li>Added <code>Restore Bind Pose</code> context menu function to <code>Animator</code> components.</li>
<li>Added an <code><a href="/animancer/api/Animancer/IAnimancerComponent">IAnimancerComponent</a></code> reference to <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code>.
<ul>
<li>Added <code>AnimationClip</code> keyed methods to <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code> and <code><a href="/animancer/api/Animancer/AnimancerLayer">AnimancerLayer</a></code> since they can now use <code>IAnimancerComponent.GetKey</code> to determine the appropriate key.</li>
</ul>
</li>
</ul>
<h1 id="changes">Changes</h1>
<ul>
<li><code>AnimancerState.Transition.State</code> is now the state most recently passed into <code>Apply</code> (backed by the un-cast <code>BaseState</code>) so they can be more easily used on multiple objects.
<ul>
<li>Overrides of <code>CreateState</code> no longer need to manually set the <code>State</code> (but can if they want to).</li>
</ul>
</li>
<li>Changed <code>HybridAnimancerController.TransitionToController</code> to return its <code><a href="/animancer/api/Animancer/ControllerState">ControllerState</a></code>.</li>
<li>Changed <code>AnimancerLayer.DestroyStates</code> and <code>ManualMixerState.DestroyChildren</code> to iterate in reverse order.</li>
<li><code><a href="/animancer/api/Animancer/Transition">ControllerState.Transition</a></code> now uses itself as the key instead of the controller in case something else happens to use the same controller with a different set of parameters.</li>
<li>Added <code>[&lt;see cref="SerializeField"/&gt;]</code> tags to the start of comments for all properties that directly wrap serialized fields.</li>
<li>Changed many methods that take a <code>layerIndex</code> to accept negative values to mean "stay the same or use the default" and changed their default value to -1.
<ul>
<li>Changed <code><a href="/animancer/api/Animancer.Examples.Layers/LayerExample">LayerExample</a></code> to use <code>CrossFadeFromStart</code> which now works much better when changing layers.</li>
</ul>
</li>
<li>Moved the functionality to constantly repaint in Edit Mode from the manual update loop to <code>AnimancerPlayableEditor.RequiresConstantRepaint</code>.</li>
<li>Added a <code><a href="/animancer/api/Animancer/Validate">Validate</a></code> class for all the validation methods and Lite restrictions.
<ul>
<li><code>Validate.FadeDuration</code> now allows 0 in Animancer Lite.</li>
<li>All general validation is now conditional based on the <code>UNITY_ASSERTIONS</code> symbol (in the Unity Editor, Development Builds, and Animancer Lite).</li>
</ul>
</li>
<li>Changed <code>AnimancerState.IsPlayingAndNotEnding</code> to not try to look ahead one frame because it was only using the delta time from the previous frame so it was unreliable at best and wouldn't even be using the right type of delta time for <code>AnimatePhysics</code> or <code>UnscaledTime</code>.</li>
<li>Changed <code>AnimancerNode.Stop</code> from <code>abstract</code> to <code>virtual</code> so it can set <code>Weight = 0</code> by default since both <code><a href="/animancer/api/Animancer/AnimancerLayer">AnimancerLayer</a></code> and <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> did so.</li>
<li>Moved <code><a href="/animancer/api/Animancer/AnimancerUtilities">AnimancerUtilities</a></code> into the <code>Internal</code> folder. It will now be included in the Lite DLL instead of having its source visible in Animancer Lite.</li>
<li>Split <code>AnimancerPlayableEditor</code> into <code><a href="/animancer/api/Animancer.Editor/BaseAnimancerComponentEditor">BaseAnimancerComponentEditor</a></code> and <code><a href="/animancer/api/Animancer.Editor/AnimancerPlayableDrawer">AnimancerPlayableDrawer</a></code> to the preview window can draw its <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code> without actually having an <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code>.</li>
</ul>
<h1 id="improvements">Improvements</h1>
<ul>
<li>Added 50+ unit tests using the <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@1.1/manual/index.html">Unity Test Framework</a>. The tests aren't planned for release so they won't directly matter to users, but they will help reduce the possibility of bugs making it to release.</li>
<li>Adding a <code><a href="/animancer/api/Animancer/HybridAnimancerComponent">HybridAnimancerComponent</a></code> to an object with an <code>AnimatorController</code> assigned to its <code>Animator</code> will now assign that controller to the animancer instead of only clearing it.</li>
<li>Cleaned up <code>Spider Bot</code> animation names to match the same convention as others.</li>
<li>Improved the <code><a href="/animancer/api/Animancer.Examples.InverseKinematics/RaycastFootIK">RaycastFootIK</a></code> example script to account for the foot rotation when calculating the raycast diration.</li>
<li>The <code>ReadMe</code> now lists all example scenes for easy navigation.</li>
<li>Removed unnecessary calls to <code>SetInputCount</code> and <code>SetInputWeight</code> during <code>AnimancerPlayable.OnPlayableCreate</code>.</li>
<li>Minor optimisation in <code>AnimancerNode.ApplyWeight</code>.</li>
<li>Added Asset Labels to most assets.</li>
<li>Changed parameter references in comments to use the grave accent instead of single quotes.</li>
<li>Improved explanations of <code>AnimancerPlayable.maxLayerCount</code> and <code>AnimancerLayer.maxCrossFadeFromStartDepth</code> in their exceptions and mentioned the exceptions in their comments.</li>
<li>Added a minor optimisation in the <code><a href="/animancer/api/Animancer/AnimancerState/840B3EB1">AnimancerState.Time</a></code> setter to only cast the value to <code>double</code> once.</li>
<li>Added <code>Key.KeyedList</code>:
<ul>
<li>Changed <code><a href="/animancer/api/Animancer/AnimancerNode">AnimancerNode</a></code> to inherit from <code><a href="/animancer/api/Animancer/Key">Key</a></code> and replaced the dirty node update list with a keyed list which greatly cleans up that part of the system.</li>
<li>Changed <code>IEarlyUpdate</code> into <code><a href="/animancer/api/Animancer/IAnimancerUpdatable">IAnimancerUpdatable</a></code> which implements <code><a href="/animancer/api/Animancer/IKeyHolder">IKeyHolder</a></code> and replaced its list with a keyed list as well.</li>
<li>Removed the <code>needsMoreUpdates</code> parameter from <code>IAnimancerUpdatable.Update</code> since they can be immediately removed at any time by <code>AnimancerPlayable.CancelUpdate</code>.</li>
</ul>
</li>
<li>Added <code><a href="/animancer/api/Animancer/IAnimationClipSourceInternal">IAnimationClipSourceInternal</a></code> which takes an <code>ICollection</code> instead of a <code>List</code> so it can use <code>HashSet</code>s to efficiently avoid duplicates.
<ul>
<li>All <code>Transition</code>s now implement <code><a href="/animancer/api/Animancer/IAnimationClipSourceInternal">IAnimationClipSourceInternal</a></code>.</li>
<li>Added various <code>Gather</code> methods to <code><a href="/animancer/api/Animancer/AnimancerUtilities">AnimancerUtilities</a></code>.</li>
<li>Moved the reflection based clip gathering system from <code><a href="/animancer/api/Animancer.Editor/AnimancerEditorUtilities">AnimancerEditorUtilities</a></code> into a dedicated <code><a href="/animancer/api/Animancer.Editor/AnimationGatherer">AnimationGatherer</a></code> class and improved its reliability.</li>
<li>Removed <code>IAnimancerClipSource</code> because <code><a href="/animancer/api/Animancer.Editor/AnimationGatherer">AnimationGatherer</a></code> no longer uses it.</li>
</ul>
</li>
<li>Added <code><a href="/animancer/api/Animancer/CollectionPool">CollectionPool</a></code> to allow easy reuse of temporary collections.</li>
<li>Improved <code><a href="/animancer/api/Animancer/Drawer">ClipState.Transition.Drawer</a></code>:
<ul>
<li>It no longer disables the <code>Start Time</code> fields when the toggle is disabled.</li>
<li>Fixed the spacing when the <code>StartTimeIsNormalized</code> field overrides a prefab value.</li>
<li>Toggling <code>StartTimeIsNormalized</code> in the Inspector will now convert the <code>StartTime</code> between seconds and normalized.</li>
</ul>
</li>
</ul>
<h1 id="fixes">Fixes</h1>
<ul>
<li>Fixed <code>CrossFadeFromStart</code> to work properly with the <code>fadeDuration</code> set to 0.</li>
<li>Fading now accounts for the speed of the parent nodes.</li>
<li>Fixed <code>ControllerState.GatherDefaultStates</code> to properly gather the state for layer 0.</li>
<li>Fixed transitions to use the correct label for the main property in Unity 2018.3+.</li>
<li>Fixed <code>ManualMixerState.Transition.CreateState</code> to properly call <code>Initialise</code> to create its states.</li>
<li>Removed the functionality to update animations in Edit Mode from Unity 2018.3+ because Unity now does it automatically.</li>
<li>Calling <code>AnimancerState.SetParent</code> with an already occupied port will now leave the state properly disconnected as it fails.</li>
<li>Fixed <code><a href="/animancer/api/Animancer/AnimancerPlayable/FEFD6C35">AnimancerPlayable.KeepChildrenConnected</a> = true</code> to work properly.</li>
<li>Fixed the Edit Mode update loop to not throw exceptions when an object is destroyed.</li>
<li>Fixed the <code>AnimancerStateDrawer</code> progress bars to be properly visible in the Dark Theme and changed the colors to be a bit stronger overall.</li>
<li>The <code><a href="/animancer/api/Animancer/AnimancerPlayable">AnimancerPlayable</a></code> finalizer will no longer destroy the graph automatically while in Play Mode since that would mean a runtime warning anyway.</li>
</ul>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>