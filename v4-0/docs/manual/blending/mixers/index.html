<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/v4-0/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/v4-0/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - Mixers</title>
        <link href="/animancer/v4-0/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/v4-0/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/v4-0/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/v4-0/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/v4-0/assets/js/app.min.js"></script>         
        <script src="/animancer/v4-0/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/v4-0/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/v4-0/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/v4-0/assets/js/mermaid.min.js"></script>
        <script src="/animancer/v4-0/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/v4-0/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/v4-0/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/v4-0/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/animancer/v4-0/docs"><img src="/animancer/v4-0/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Docs</a></li>
        <li><a href="/animancer/v4-0/faq"><img src="/animancer/v4-0/images/faq.png" height="20" style="position:relative; left:-4px; top:-1px;"> FAQ</a></li>
        <li><a href="/animancer/v4-0/api/Animancer/AnimancerComponent"><img src="/animancer/v4-0/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v4.0</a></li>
        <li><a href="/animancer/forum"><img src="/animancer/v4-0/images/forum.png" height="20" style="position:relative; left:-4px; top:-1px;"> Forum</a></li>
        <li><a href="mailto:AnimancerUnityPlugin@gmail.com?subject=Animancer"><img src="/animancer/v4-0/images/contact.png" height="20" style="position:relative; left:-4px; top:-1px;"> Contact</a></li>
        <li><a href="/animancer/lite"><img src="/animancer/v4-0/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Try</a></li>
        <li><a href="/animancer/pro"><img src="/animancer/v4-0/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Buy</a></li>
        <li><a href="https://kybernetikgames.github.io/kailas-dierk/unity-assets"><img src="/animancer/v4-0/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
<a href="/animancer" style="font-size:1.42em; color:white">This is the <strong>Animancer v4.0 Beta</strong> Documentation. Click Here to return to the v3.1 Documentation.</a>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#choosing-a-mixer">Choosing a Mixer</a></p>
<p><a href="#manual-creation">Manual Creation</a></p>
<p><a href="#blend-trees-vs.mixers">Blend Trees vs. Mixers</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li class="treeview">
                    <a href="/animancer/v4-0/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/why-replace-mecanim">Why Replace Mecanim?</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/playing">Playing</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/waiting">Waiting</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/introduction/features">Features</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/glossary">Glossary</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/basics/basic-scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/named-animations">04 Named Animations</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/hybrid-system">05 Hybrid System</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/v4-0/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/v4-0/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/v4-0/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/v4-0/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animation-events">05 Animation Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animation-events/simple-and-end-events">01 Simple and End Events</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animation-events/other-events">02 Other Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/state-machines">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/state-machines/creatures">01 Creatures</a></li>
                <li><a href="/animancer/v4-0/docs/examples/state-machines/interrupt-management">02 Interrupt Management</a></li>
                <li><a href="/animancer/v4-0/docs/examples/state-machines/brains">03 Brains</a></li>
                <li><a href="/animancer/v4-0/docs/examples/state-machines/more-brains">04 More Brains</a></li>
                <li><a href="/animancer/v4-0/docs/examples/state-machines/platformer">05 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/inverse-kinematics">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/inverse-kinematics/puppet">01 Puppet</a></li>
                <li><a href="/animancer/v4-0/docs/examples/inverse-kinematics/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/hybrid">01 Hybrid</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit">02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Original</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>

                    </ul>
                </li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/v4-0/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/playing-animations">Playing Animations</a></li>
                <li><a href="/animancer/v4-0/docs/manual/states">States</a></li>
                <li><a href="/animancer/v4-0/docs/manual/waiting-for-animations">Waiting for Animations</a></li>
                <li><a href="/animancer/v4-0/docs/manual/inspector">Inspector</a></li>
                <li><a href="/animancer/v4-0/docs/manual/component-types">Component Types</a></li>
                <li class="treeview active">
                    <a href="/animancer/v4-0/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/v4-0/docs/manual/blending/layers">Layers</a></li>
                <li class="selected"><a href="/animancer/v4-0/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/manual/finite-state-machines">Finite State Machines</a></li>
                <li><a href="/animancer/v4-0/docs/manual/transitions">Transitions</a></li>
                <li><a href="/animancer/v4-0/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/v4-0/docs/manual/events/animancer">Animancer Events</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/manual/inverse-kinematics">Inverse Kinematics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/bugs/inconsistent-timing">Inconsistent Timing</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/resetting-animated-values">Resetting Animated Values</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/root-motion-interpolation">Root Motion Interpolation</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/unused-graph-destroy-warning">Unused Graph Destroy Warning</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/v4-0/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/v4-0/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/v4-0/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/v4-0/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/changes/animancer-v4-0-beta">Beta Test v4.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v4-0">Progress of v4.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Mixers</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p>This page needs to be updated for Animancer v4.0.</p>
</blockquote>
<p><em><a href="/animancer/pro"><strong>Pro-Only</strong></a>: Animancer Lite allows you to try out this feature in the Unity Editor, but it will not be available in runtime builds unless you purchase Animancer Pro. See the <a href="../../../introduction/features">Feature Comparison</a> for more information.</em></p>
<p><code><a href="/animancer/v4-0/api/Animancer/MixerState">MixerState</a></code>s serve the same purpose as Mecanim Blend Trees; they allow you to blend multiple animations based on a parameter. For example, you might blend between <em>Idle</em>, <em>Walk</em>, and <em>Run</em> based on how fast you want the character to move (such as in proportion to how far the user tilts a joystick) so that they animate appropriately for any speed instead of only having a few specific speeds they can move at.</p>
<p>The <a href="../../../examples/locomotion/linear-blending">Locomotion/Linear Blending</a> example demonstrates how to use Mixers and Blend Trees.</p>
<p><img src="../../../examples/locomotion/linear-blending/linear-blending.gif" class="img-responsive"></p>
<p>Mixers are usually set up in the Inspector using <a href="../../transitions#mixer-transitions">Mixer Transitions</a>, but they can also be <a href="#manual-creation">created manually</a>.</p>
<p><img src="../../../examples/locomotion/linear-blending/mixer-inspector.png" class="img-responsive"></p>
<h1 id="choosing-a-mixer">Choosing a Mixer</h1>
<p>There are several different mixer types and you can create your own by inheriting from any of them:</p>
<table class="table">
<thead>
<tr>
<th>Mixer Type</th>
<th>Parameter / Thresholds</th>
<th>Interpolation Algorithm</th>
<th>Equivalent Blend Tree</th>
</tr>
</thead>
<tbody>
<tr>
<td><code><a href="/animancer/v4-0/api/Animancer/ManualMixerState">ManualMixerState</a></code></td>
<td>none</td>
<td>Manual Weights</td>
<td><a href="https://docs.unity3d.com/Manual/BlendTree-DirectBlending.html">Direct</a></td>
</tr>
<tr>
<td><code><a href="/animancer/v4-0/api/Animancer/LinearMixerState">LinearMixerState</a></code></td>
<td><code>float</code></td>
<td>Linear</td>
<td><a href="https://docs.unity3d.com/Manual/BlendTree-1DBlending.html">1D</a></td>
</tr>
<tr>
<td><code><a href="/animancer/v4-0/api/Animancer/CartesianMixerState">CartesianMixerState</a></code></td>
<td><code>Vector2</code></td>
<td>Gradient Band</td>
<td><a href="https://docs.unity3d.com/Manual/BlendTree-2DBlending.html">2D Freeform Cartesian</a></td>
</tr>
<tr>
<td><code><a href="/animancer/v4-0/api/Animancer/DirectionalMixerState">DirectionalMixerState</a></code></td>
<td><code>Vector2</code></td>
<td>Polar Gradient Band</td>
<td><a href="https://docs.unity3d.com/Manual/BlendTree-2DBlending.html">2D Freeform Directional</a></td>
</tr>
</tbody>
</table>
<p><code><a href="/animancer/v4-0/api/Animancer/ManualMixerState">ManualMixerState</a></code>s allow you to simply control the <code><a href="/animancer/v4-0/api/Animancer/AnimancerNode/94B3FD61">AnimancerNode.Weight</a></code> of each state manually without any automated calculations. This is often useful for additive animations and blend shapes for things like facial expressions.</p>
<p>Other mixers have a <code>Parameter</code> property and <code>Thresholds</code> array which are used to calculate the weight of each state for you. When the <code>Parameter</code> is exactly equal to a particular threshold, the corresponding state will be at exactly 1 weight, while <code>Parameter</code> values between the <code>Thresholds</code> will calculate fractional weights based on the interpolation algorithm being used. You can either specify the thresholds manually or calculate them using <code>MixerState&lt;T&gt;.CalculateThresholds</code>. The <code><a href="/animancer/v4-0/api/Animancer/AnimancerUtilities">AnimancerUtilities</a></code> class also provides <code>CalculateThresholdsFromAverageVelocityXZ</code> as an extension method for <code>Vector2</code> based mixers (Cartesian and Directional) to calculate the thresholds based on the average root motion velocity of each state on the X and Z axes. Note that this method needs the “<em>Bake Into Pose</em>” toggle to be disabled for “<em>Root Transform Position (XZ)</em>” in the Import Settings of each <code>AnimationClip</code> in the mixer.</p>
<p>When selecting a 2D mixer, Directional generally offers better interpolation than Cartesian for animations that represent direction such as move forward/back/left/right. Also note that in areas with 180 degrees or more between states the interpolation is ill-defined and will likely have undesirable results; I.E. if you have clips for <em>forward</em>, <em>back</em>, and <em>left</em>, but no <em>right</em>, then you will get odd results if you set the parameter to the right.</p>
<p><code><a href="/animancer/v4-0/api/Animancer/MixerState">MixerState</a></code>s are a type of <code><a href="/animancer/v4-0/api/Animancer/AnimancerState">AnimancerState</a></code> with several other differences from regular <code><a href="/animancer/v4-0/api/Animancer/ClipState">ClipState</a></code>s:</p>
<ul>
<li>The <code>Clip</code> property will always return null.</li>
<li>States inside an <code><a href="/animancer/v4-0/api/Animancer/MixerState">MixerState</a></code> are not generally registered in the internal <a href="../../states#keys">Dictionary</a>. If you need to access these states directly you must do so via their index in the mixer itself. All inbuilt mixers expose their <code>States</code> as an array.</li>
<li>Since mixers don’t have a duration or time of their own, they don’t actually have an <code>OnEnd</code> callback but will instead pass on anything they are given to all of their child states.</li>
</ul>
<h1 id="manual-creation">Manual Creation</h1>
<p>If you don't want to use a <a href="../../transitions#mixer-transitions">Mixer Transition</a>, you can create one yourself using code:</p>
<ol>
<li>Select a mixer type from the table above and make a <code>new</code> one. For example, <code>new <a href="/animancer/v4-0/api/Animancer/LinearMixerState">LinearMixerState</a></code>.</li>
<li>Call one of the <code>Initialise</code> methods on the mixer:</li>
</ol>
<ul>
<li><code>Initialise(portCount)</code> allocates room for the specified number of states which can be filled individually using <code>CreateState</code> or by passing the mixer into the constructor or <code>SetParent</code> method of any state type. This even lets you nest mixers inside each other.</li>
<li><code>Initialise(clips, thresholds)</code> allocates a <code><a href="/animancer/v4-0/api/Animancer/ClipState">ClipState</a></code> for each of the <code>clips</code> and assigns their corresponding <code>thresholds</code>.</li>
</ul>
<ol start="3">
<li>Make sure all states have been assigned thresholds to determine the parameter values where they will be used and how they will blend in relation to other states. This can be done using optional parameters in the <code>Initialise</code> and <code>CreateState</code> methods, or by calling <code>SetThreshold</code> or <code>SetThresholds</code>.</li>
<li>Store a reference to the mixer so you can set its <code>Parameter</code> later on to control its blending.</li>
</ol>
<p>The following example script uses a <code><a href="/animancer/v4-0/api/Animancer/LinearMixerState">LinearMixerState</a></code> to blend between <em>idle</em> and <em>Run</em> animations based on a <code>Movement Speed</code> slider in the Inspector:</p>
<pre><code class="language-cs">using Animancer;
using UnityEngine;

public sealed class LinearMixerExample : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/v4-0/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private AnimationClip _Idle;
    [SerializeField] private AnimationClip _Run;

    [SerializeField, Range(0, 1)]
    private float _MovementSpeed;

    // Keep the mixer after is is created so we can change the Parameter later.
    private <a href="/animancer/v4-0/api/Animancer/LinearMixerState">LinearMixerState</a> _MovementMixer;

    private void Awake()
    {
        // Make a new mixer and connect it to the default layer.
        _MovementMixer = new LinearMixerState(_Animancer);

        // We could specify custom thresholds in the Initialise call,
        // but since we aren't it will use 0 and 1 respectively.
        // Other overloads take 3 clips, or an array of any number of clips.
        _MovementMixer.Initialise(_Idle, _Run);

        // Optionally register the mixer with a key so it
        // can be accessed from other scripts using that key.

        // A string name:
        _MovementMixer.Key = "Movement Mixer";
        //var state = _Animancer.States["Movement Mixer"];

        // Or use this component itself as the key.
        _MovementMixer.Key = this;
        //var state = _Animancer.States[this];

        // Play the mixer just like a regular clip.
        _Animancer.Play(_MovementMixer);
    }

    private void Update()
    {
        // Set the mixer's parameter to control its current blending.
        _MovementMixer.Parameter = _MovementSpeed;
    }
}
</code></pre>
<div style="display:inline-block"><img src="linear-mixer-inspector.png" class="img-responsive img-right">
<p>This screenshot shows the <code><a href="/animancer/v4-0/api/Animancer/AnimancerComponent">AnimancerComponent</a></code> Inspector for the example script in Play Mode. Unlike a regular <code><a href="/animancer/v4-0/api/Animancer/ClipState">ClipState</a></code> that plays a single animation, the <code><a href="/animancer/v4-0/api/Animancer/LinearMixerState">LinearMixerState</a></code> shows its child states with the ability to expand the details of both the mixer and child states.</p></div><p></p>
<h1 id="blend-trees-vs.mixers">Blend Trees vs. Mixers</h1>
<ul>
<li>Mixers are created dynamically at runtime. This means they are more flexible in how they can be used. You can directly access the details of individual states and you can create your own mixer types that inherit from any of the existing ones to implement custom blending algorithms or add other features.</li>
<li>Blend Trees are created manually in the Unity Editor. They have a user-friendly interface for setting up their structure and previewing the animations, however their structure cannot be changed at runtime and they are much harder to debug since you have no access to their internals. You can play and control Blend Trees in Animancer using <a href="../../animator-controllers#parameter-controller-states">Parameter Controller States</a>.</li>
</ul>
<h2 id="foot-phase-synchronization">Foot Phase Synchronization</h2>
<p>When mixing animations of different lengths, they will get out of sync if left to play normally. For example, it could end up with a <em>Walk</em> animation having the left foot on the ground while the <em>Run</em> animation has the right foot on the ground, which would not give a realistic result. This causes obvious issues as you can see below where the character is walking fine about half the time while the cycles are close to each other but every few steps he does a strange shuffle that looks very unnatural.</p>
<p><img src="mixer-state.gif" class="img-responsive"></p>
<p>Blend Trees solve this issue using a technique known as Foot Phase Synchronization which is described in the following video at 17:10.</p>
<iframe width="480" height="270" src="https://www.youtube.com/embed/3lO1q8mQrrg?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p>Foot Phase Synchronization occurs automatically as part of the Blend Tree. You can't disable it or even tweak its settings at all, but most of the time there is no need to do so because it works quite reliably.</p>
<p>It would be possible to implement Foot Phase Synchronisation in Mixers (and you could do it yourself by inheriting from any of the existing mixer types), but Unity's implementation is not exposed publically so it would need to be entirely re-implemented from scratch. It would need the <code>AnimationClip</code>s to be analysed to determine their phases in the Unity Editor since their curves can't be accessed at runtime and then it would need additional logic to adjust speeds at runtime based on that analysis. This could potentially be added to Animancer in the future, but for now it has been deemed to require far too much effort to achieve something that can already be done using a Blend Tree.</p>
<h2 id="linear-root-motion-interpolation">Linear Root Motion Interpolation</h2>
<p>Blend Trees and Mixer States also have a distinct difference in the weights they calculate for their individual states. The video below shows the parameter slider at 0.25, which is exactly halfway between the thresholds of <em>Idle</em> (0) and <em>Walk</em> (0.5).</p>
<ul>
<li>In the <code><a href="/animancer/v4-0/api/Animancer/MixerState">MixerState</a></code> this means both animations are given 0.5 <code>Weight</code> each, causing the character to walk at half speed as you would expect. You can see this most clearly by measuring the distance the character travels before the video loops.</li>
<li>But in the Blend Tree the result is much slower. We have no way of seeing the actual <code>Weight</code>s it is using, though judging by how far the hands move it appears to be very close to the expected 0.5. However, the <code>Speed</code> is clearly much slower and the Root Motion it applies is even slower than that to the extent that you can't actually see the character moving in this video (it's moving less than 0.001 meters per second). This is not caused by Animancer or the Playables API, the exact same thing occurs when using an Animator Controller normally.</li>
</ul>
<p><img src="linear-interpolation.gif" class="img-responsive"></p>
<p>The difference in <code>Speed</code> is likely a direct result of the Foot Phase Synchronization system, however the reason for the Root Motion to be even slower than that is unknown. <a href="../../../bugs/root-motion-interpolation">This bug</a> has been acknowledged by Unity, however they are not willing to explain the cause and do not intend to fix it because people already expect it to work this way ...</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>